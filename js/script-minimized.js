function hide(e){e.classList.add("modal-hide"),removeFrom=e,setTimeout("RemoveClasses(removeFrom)",600)}function RemoveClasses(e){e.classList.remove("modal-show"),e.classList.remove("modal-error"),e.classList.remove("modal-hide")}var writeUsLink=document.querySelector(".contacts-write-us"),writeUs=document.querySelector(".modal-feedback"),writeUsClose=writeUs.querySelector(".modal-close"),writeUsForm=writeUs.querySelector("form"),login=writeUs.querySelector("[name=feedback-name]"),email=writeUs.querySelector("[name=feedback-email]"),message=writeUs.querySelector("[name=feedback-message]"),storageLogin=localStorage.getItem("login"),storageEmail=localStorage.getItem("email"),mapLink=document.querySelector(".map-link img"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");writeUsForm.addEventListener("submit",function(e){login.value&&email.value&&message.value?(localStorage.setItem("login",login.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writeUs.classList.remove("modal-error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal-error"))}),writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.add("modal-show"),storageLogin?(login.value=storageLogin,storageEmail?(email.value=storageEmail,message.focus()):email.focus()):login.focus()}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),hide(writeUs)}),mapClose.addEventListener("click",function(e){hide(mapPopup)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(writeUs.classList.contains("modal-show")&&hide(writeUs),mapPopup.classList.contains("modal-show")&&hide(mapPopup))}),document.querySelector("body").addEventListener("click",function(e){writeUs.classList.contains("modal-show")&&e.target!=writeUsLink&&!writeUs.contains(e.target)&&hide(writeUs),mapPopup.classList.contains("modal-show")&&e.target!=mapLink&&!mapPopup.contains(e.target)&&hide(mapPopup)});
